{"openapi":"3.0.1","info":{"title":"Auth Server API","description":"Centralized Authentication Server with OAuth 2.1 and OpenID Connect","contact":{"name":"Auth Server Team","url":"https://authserver.com","email":"support@authserver.com"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Authentication","description":"APIs for authentication and logout"},{"name":"User Management","description":"APIs for user registration, profile management, and role assignment"},{"name":"Multi-Factor Authentication","description":"APIs for MFA setup, verification, and management"}],"paths":{"/api/users/{userId}/roles":{"put":{"tags":["User Management"],"summary":"Update user roles","description":"Assigns new roles to a user (admin only)","operationId":"updateUserRoles","parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"uniqueItems":true,"type":"array","description":"Set of role names","items":{"type":"string"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/users/{userId}/profile":{"put":{"tags":["User Management"],"summary":"Update user profile","description":"Updates user's first and last name","operationId":"updateUserProfile","parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"firstName","in":"query","description":"First name","required":true,"schema":{"type":"string"}},{"name":"lastName","in":"query","description":"Last name","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/users/{userId}/unlock":{"post":{"tags":["User Management"],"summary":"Unlock user account","description":"Unlocks a user account (admin only)","operationId":"unlockUser","parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/users/{userId}/lock":{"post":{"tags":["User Management"],"summary":"Lock user account","description":"Locks a user account (admin only)","operationId":"lockUser","parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/users/{userId}/enable":{"post":{"tags":["User Management"],"summary":"Enable user account","description":"Enables a user account (admin only)","operationId":"enableUser","parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/users/{userId}/disable":{"post":{"tags":["User Management"],"summary":"Disable user account","description":"Disables a user account (admin only)","operationId":"disableUser","parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/users/register":{"post":{"tags":["User Management"],"summary":"Register a new user","description":"Creates a new user account with email verification","operationId":"registerUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegistrationRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/users/mfa/verify":{"post":{"tags":["Multi-Factor Authentication"],"summary":"Verify MFA code","description":"Verifies the MFA code provided by the user","operationId":"verifyMfaCode","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MfaVerificationRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/users/mfa/setup":{"post":{"tags":["Multi-Factor Authentication"],"summary":"Setup MFA","description":"Sets up multi-factor authentication for the current user","operationId":"setupMfa","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MfaSetupResponse"}}}}}}},"/api/users/mfa/regenerate-backup-codes":{"post":{"tags":["Multi-Factor Authentication"],"summary":"Regenerate backup codes","description":"Generates new backup codes for MFA","operationId":"regenerateBackupCodes","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}}}}}},"/api/users/mfa/disable":{"post":{"tags":["Multi-Factor Authentication"],"summary":"Disable MFA","description":"Disables multi-factor authentication for the current user","operationId":"disableMfa","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/auth/refresh":{"post":{"tags":["Authentication"],"summary":"Refresh access token","description":"Refreshes the access token using a valid refresh token","operationId":"refreshToken","parameters":[{"name":"refreshToken","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/auth/logout":{"post":{"tags":["Authentication"],"summary":"Logout user","description":"Logs out the current user and revokes all tokens","operationId":"logout","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/auth/logout/all":{"post":{"tags":["Authentication"],"summary":"Logout from all devices","description":"Logs out the current user from all devices","operationId":"logoutFromAllDevices","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/users/{userId}":{"get":{"tags":["User Management"],"summary":"Get user by ID","description":"Returns user profile by user ID (admin only)","operationId":"getUserById","parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}},"delete":{"tags":["User Management"],"summary":"Delete user","description":"Deletes a user account (admin only)","operationId":"deleteUser","parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/users/verify-email":{"get":{"tags":["User Management"],"summary":"Verify email address","description":"Verifies user email using verification token","operationId":"verifyEmail","parameters":[{"name":"token","in":"query","description":"Email verification token","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/users/me":{"get":{"tags":["User Management"],"summary":"Get current user profile","description":"Returns the authenticated user's profile information","operationId":"getCurrentUser","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}}},"components":{"schemas":{"UserResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"emailVerified":{"type":"boolean"},"mfaEnabled":{"type":"boolean"},"enabled":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"lastLoginAt":{"type":"string","format":"date-time"},"roles":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"UserRegistrationRequest":{"required":["email","firstName","lastName","password","username"],"type":"object","properties":{"username":{"maxLength":50,"minLength":3,"type":"string"},"email":{"type":"string"},"password":{"maxLength":2147483647,"minLength":8,"type":"string"},"firstName":{"maxLength":100,"minLength":0,"type":"string"},"lastName":{"maxLength":100,"minLength":0,"type":"string"}}},"MfaVerificationRequest":{"required":["code"],"type":"object","properties":{"code":{"maxLength":8,"minLength":6,"type":"string"}}},"MfaSetupResponse":{"type":"object","properties":{"secret":{"type":"string"},"qrCodeUrl":{"type":"string"},"backupCodes":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"message":{"type":"string"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}